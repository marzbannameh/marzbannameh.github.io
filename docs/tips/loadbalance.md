---
sidebar_position: 6
---

# لودبالانس با کمک مرزبان و کلودفلر

- این روش `DNS Load Balancing` هست که به شما کمک می‌کند تا هم کاربرها بهترین سرعت و کیفیت رو تجربه کنند هم شما متحمل هزینه کمتری برای خرید سرور داشته باشید چرا که فشار روی سرورها یکسان است.

- ولین نکته این هست که تیک پروکسی باید خاموش باشه بعد دو ساب دامین یکسان با ایپی‌ نودهایی که میخواین لودبالانس اعمال بشه ایجاد میکنید و `TTL` رو روی `10` دقیقه قرار میدین ، اصل کار همین هست اما نکات جانبی داره. مثال زیر هم توجه کنید:

:::note رکورد اول
DNS A Record

Load.MarzbanNameh.com

IPv4: 1.1.1.1 

TTL: 1 Minute 
:::

:::note رکورد دوم
DNS A Record

Load.MarzbanNameh.com

IPv4: 2.2.2.2 

TTL: 10 Minute
:::

- بعد توی `Host Settings` برای اون اینباند به خصوص ساب دامین بالا رو که لود بالانس اعمال کردید قرار میدین.

⚙️ نکته: برا این کار لازمه که پنل شما مرزبان باشه و نود‌هایی که می‌خواین لودبالانس داشته باشه یک لوکیشن باشند چراکه اگر لوکیشن‌ها تفاوت کنه توی بعضی اپ‌ها مثل اینستاگرام و .... مشکل بوجود میاد دائما لوکیشن تغییر می‌کنه که اصلا خوب نیست.

⚙️ نکته: اگر از طریق `Mapping` یک پورت متفاوت برای هر نود تعیین کردین نمیتونین از این روش استفاده کنین. چراکه باید هر دو نود یک پورت مشترک برای کانفیگ‌‌ها داشته باشند و همینطور اگر هاپروکسی اعمال کردین تنظیمات دقیقا مشابه باشه تا موقع سوییچ شدن آیپی همه چیز درست انجام بشه. 

⚙️ نکته: گاها پیش میاد شما با کانفیگ‌ تست می‌کنین که ببینین آیپی داره جابجا میشه یا خیر و ممکنه بخاطر `Cache` دقیقا نتونید تغییر رو احساس کنید ولی بعد از چندین ساعت از بخش `Node Usage` پنل مرزبان چک کنید می‌بینید که مصرف نود‌هایی که لود بالانس اعمال کردید تقریباً یکسان شده است.